import{a as f}from"./axios-Bo0ATomq.js";import{_ as E,c as u,a as e,g as V,F as g,f as x,t as d,b as a,w as k,r as h,o as _,e as y,v as w,h as p,i as S}from"./index-D8ubdEGr.js";var U={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"yu-t-200053",BASE_URL:"/HexSchool-2023Vue/w6/dist/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_PATH:v}=U,T={data(){return{carts:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart(){const n=`${b}/api/${v}/cart`;f.get(n).then(t=>{this.carts=t.data.data,console.log(this.carts)})},Submit(){console.log(this.form)},deleteCart(n){const t=`${b}/api/${v}/cart/${n}`;f.delete(t).then(r=>{alert(r.data.message),this.getCart()}).catch(r=>{alert(r.response.data.message)})},deleteAll(){const n=`${b}/api/${v}/carts`;f.delete(n).then(t=>{alert(t.data.message),this.getCart()}).catch(t=>{alert(t.response.data.message)})}},mounted(){this.getCart()}},q={class:"container"},A=e("h2",{class:"text-center"},"前台購物車",-1),F={class:"text-end my-3"},M={class:"table align-middle"},D=e("thead",null,[e("tr",null,[e("td",{width:"10%"}),e("td",{width:"40%"},"品名"),e("td",{width:"30%"},"數量 / 單位"),e("td",{width:"30%"},"單價")])],-1),R=["onClick"],B={class:"input-group"},I=["onUpdate:modelValue"],L=["value"],H=e("label",{class:"input-group-text",for:"cart"},"個",-1),P={class:"text-end"},N={class:"text-end"},O=e("td",{colspan:"3"},"總計",-1),z=e("td",{colspan:"3",class:"text-success"},"折扣價",-1),j={class:"text-success"},G={class:"row"},J={class:"mb-3"},K=e("label",{for:"email",class:"form-label"},"Email",-1),Q={class:"mb-3"},W=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),X={class:"mb-3"},Y=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),Z={class:"mb-3"},$=e("label",{for:"address",class:"form-label"},"收件人地址",-1),ee={class:"mb-3"},te=e("label",{for:"message",class:"form-label"},"留言",-1),se=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function le(n,t,r,oe,l,i){const c=h("VeeField"),m=h("ErrorMessage"),C=h("VeeForm");return _(),u("div",q,[A,e("div",F,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:t[0]||(t[0]=V((...o)=>i.deleteAll&&i.deleteAll(...o),["prevent"]))}," 清空購物車 ")]),e("table",M,[D,e("tbody",null,[(_(!0),u(g,null,x(l.carts.carts,o=>(_(),u("tr",{key:o.id},[e("td",null,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:V(s=>i.deleteCart(o.id),["prevent"])}," × ",8,R)]),e("td",null,d(o.product.title),1),e("td",null,[e("div",B,[y(e("select",{class:"form-select",id:"cart","onUpdate:modelValue":s=>o.qty=s},[(_(),u(g,null,x(20,s=>e("option",{key:s,value:s},d(s),9,L)),64))],8,I),[[w,o.qty]]),H])]),e("td",P,"$ "+d(o.product.price),1)]))),128))]),e("tfoot",N,[e("tr",null,[O,e("td",null,"$ "+d(l.carts.total),1)]),e("tr",null,[z,e("td",j,"$ "+d(l.carts.final_total),1)])])]),e("div",G,[a(C,{onSubmit:i.Submit,ref:"form",class:"col-md-6"},{default:k(({errors:o})=>[e("div",J,[K,a(c,{id:"email",name:"email",type:"email",class:p(["form-control",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=s=>l.form.user.email=s)},null,8,["class","modelValue"]),a(m,{name:"email",class:"invalid-feedback"})]),e("div",Q,[W,a(c,{id:"name",name:"姓名",type:"text",class:p(["form-control",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=s=>l.form.user.name=s)},null,8,["class","modelValue"]),a(m,{name:"姓名",class:"invalid-feedback"})]),e("div",X,[Y,a(c,{id:"tel",name:"電話",type:"tel",class:p(["form-control",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|min:8",modelValue:l.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=s=>l.form.user.tel=s)},null,8,["class","modelValue"]),a(m,{name:"電話",class:"invalid-feedback"})]),e("div",Z,[$,a(c,{id:"address",name:"地址",type:"text",class:p(["form-control",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=s=>l.form.user.address=s)},null,8,["class","modelValue"]),a(m,{name:"地址",class:"invalid-feedback"})]),e("div",ee,[te,y(e("textarea",{id:"message",name:"留言",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>l.form.message=s)},null,512),[[S,l.form.message]])]),se]),_:1},8,["onSubmit"])])])}const de=E(T,[["render",le]]);export{de as default};
